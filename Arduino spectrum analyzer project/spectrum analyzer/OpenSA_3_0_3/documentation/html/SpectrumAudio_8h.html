<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Open Spectrum Analyzer: SpectrumAudio.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open Spectrum Analyzer
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">SpectrumAudio.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Audio sampling driver for Open Spectrum Analyzer.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;avr/interrupt.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="SpectrumFHT_8h_source.html">SpectrumFHT.h</a>&gt;</code><br/>
</div>
<p><a href="SpectrumAudio_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpectrumAudio_8h.html#a6671cfbc98f1f3374f3e6c9f63e13ae4">ADCMAGICNUMBER</a>&#160;&#160;&#160;0b11001100</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">bits are [ADC?][start conversion][auto trigger?][interrupt flag][interrupt enable][three prescaler bits] prescaler is 4.  <a href="#a6671cfbc98f1f3374f3e6c9f63e13ae4"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpectrumAudio_8h.html#a72aef54bbf8430ce6d860206deb2d1ce">init_audio</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes audio configuration.  <a href="#a72aef54bbf8430ce6d860206deb2d1ce"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4ff48c11864f6a45d87a4619c31f14f2"></a><!-- doxytag: member="SpectrumAudio.h::ISR" ref="a4ff48c11864f6a45d87a4619c31f14f2" args="(ADC_vect, ISR_BLOCK)" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpectrumAudio_8h.html#a4ff48c11864f6a45d87a4619c31f14f2">ISR</a> (ADC_vect, ISR_BLOCK)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Audio sampling interrupt handling routine. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpectrumAudio_8h.html#a29caf60325f23c7113510e441a4bd319">check_audio</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Audio processing routine.  <a href="#a29caf60325f23c7113510e441a4bd319"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a614cded99d3ce27a2e1419601457124e"></a><!-- doxytag: member="SpectrumAudio.h::current_channel" ref="a614cded99d3ce27a2e1419601457124e" args="" -->
volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpectrumAudio_8h.html#a614cded99d3ce27a2e1419601457124e">current_channel</a> = 0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Audio input line currently being sampled. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab6404405767440fa4857bd36cca44243"></a><!-- doxytag: member="SpectrumAudio.h::data_index" ref="ab6404405767440fa4857bd36cca44243" args="" -->
volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpectrumAudio_8h.html#ab6404405767440fa4857bd36cca44243">data_index</a> = 0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Current index for writing sampled audio into the buffer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab2ff11791d3074d8b58db11804992a81"></a><!-- doxytag: member="SpectrumAudio.h::data_handling" ref="ab2ff11791d3074d8b58db11804992a81" args="" -->
volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpectrumAudio_8h.html#ab2ff11791d3074d8b58db11804992a81">data_handling</a> = 0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Boolean flag: true when sampling is paused for processing. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab1642576fd1f9c0ec5c7b7e0ce34f7e8"></a><!-- doxytag: member="SpectrumAudio.h::analogControls" ref="ab1642576fd1f9c0ec5c7b7e0ce34f7e8" args="[4]" -->
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpectrumAudio_8h.html#ab1642576fd1f9c0ec5c7b7e0ce34f7e8">analogControls</a> [4]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">single scalar values read from analog inputs not used for audio ( controls ). Currently only 2 is in use. <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Audio sampling driver for Open Spectrum Analyzer. </p>
<dl class="date"><dt><b>Date:</b></dt><dd>August, 2013</dd></dl>
<dl class="copyright"><dt><b>Copyright:</b></dt><dd>Michael Rule (<a href="mailto:mrule7404@gmail.com">mrule7404@gmail.com</a>) 2013 </dd>
<dd>
Joshua Holt (<a href="mailto:jholt7532@gmail.com">jholt7532@gmail.com</a>) 2013</dd></dl>
<p>This file is part of Open Spectrum Analyzer (OpenSA).</p>
<p>OpenSA is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>OpenSA is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with OpenSA. If not, see &lt;<a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>&gt;.</p>
<p>-----</p>
<p>Channel 0 is for left audio, channel 1 is for right audio. Channel 2 is hooked up to the potentiometer </p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a6671cfbc98f1f3374f3e6c9f63e13ae4"></a><!-- doxytag: member="SpectrumAudio.h::ADCMAGICNUMBER" ref="a6671cfbc98f1f3374f3e6c9f63e13ae4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="SpectrumAudio_8h.html#a6671cfbc98f1f3374f3e6c9f63e13ae4">ADCMAGICNUMBER</a>&#160;&#160;&#160;0b11001100</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>bits are [ADC?][start conversion][auto trigger?][interrupt flag][interrupt enable][three prescaler bits] prescaler is 4. </p>
<p>Prescalers of 0,1,2 don't work, 3 seems to cause some glitching of the display? </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a29caf60325f23c7113510e441a4bd319"></a><!-- doxytag: member="SpectrumAudio.h::check_audio" ref="a29caf60325f23c7113510e441a4bd319" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="SpectrumAudio_8h.html#a29caf60325f23c7113510e441a4bd319">check_audio</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Audio processing routine. </p>
<p>Performs FFT and stores the output for future use. Also switches channels. </p>

</div>
</div>
<a class="anchor" id="a72aef54bbf8430ce6d860206deb2d1ce"></a><!-- doxytag: member="SpectrumAudio.h::init_audio" ref="a72aef54bbf8430ce6d860206deb2d1ce" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="SpectrumAudio_8h.html#a72aef54bbf8430ce6d860206deb2d1ce">init_audio</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes audio configuration. </p>
<p>This does not enable interrupts. init_OpenSA calles this initializer and then calls sei() after other initialization is done. If you wish to use this file in isolation, you should manually enable interrupts when you are ready for audio sampling to start. </p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sat Aug 17 2013 19:54:44 for Open Spectrum Analyzer by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
